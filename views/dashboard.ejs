<!doctype html>
<% include partials/header %>

    <!-- Minor styling to get detailed view links to stick to bottom of card -->
    <style>
      .stickBottomRight {
        position: absolute;
        bottom: 0;
        right: 0;
      }
    </style>


    <!-- DASHBOARD -->

    <!-- Sorting -->
    <div class="row mx-3 my-3">
        <div class="col-4">
            <div class="btn-group ">
                <button type="button" class="btn btn-outline-primary dropdown-toggle pointer" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <%= sorted %>
                </button>
                <div class="dropdown-menu">    
                    <h6 class="dropdown-header">Sort√©r efter</h6>    
                    <a class="dropdown-item" href="/title">Title</a>
                    <a class="dropdown-item" href="/date">Date</a>
                    <a class="dropdown-item" href="/rt_score">RT Score</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Grid of cards with all movies -->
    <div class="">
      <div class="row mt-4 mx-3">
        <!-- Using ejs to render a card with movie data for each movie in the movies list -->
        <% movies.forEach((movie) => { %>
          <div class="col-lg-4 col-md-6 col-sm-12 d-flex align-items-stretch">
            <div class="card my-3">
              <div class="card-header">
                <h5 > 
                  <span><%= movie.title %></span> 
                  <span class="float-right"> <%= movie.rt_score %> </span>
                </h5>
              </div>
              <div class="card-body">
                <p> <span class="font-weight-bold">Release date</span> <%= movie.release_date %> </p>
                <p> <%= movie.description %> </p>
                <a class="btn btn-lg btn-link mt-4 stickBottomRight" href="/movie/<%= movie.id %>"> Detailed view </a>
              </div>
            </div>
          </div>
        <% }); %>
      </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
  </body>
</html>